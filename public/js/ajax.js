define(["jquery"],function(e){function n(n,t,i,r){return r=r||!0,e.ajax({url:n,data:t||{},type:i||"GET",dataType:"json",headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}).then(function(n,t,i){return 0==n.code?n.data:e.Deferred().reject(i,n.msg)},function(n){return e.Deferred().reject(n)}).fail(function(e,t){t||(t="URL："+n+"\n网络请求失败！\n"+e.status+"："+e.statusText),r&&alert(t)})}var t;return{apiGet:function(e,t){return n(e,t)},apiPost:function(e,t){return n(e,t,"POST")},apiPut:function(e,t){return n(e,t,"PUT")},apiPatch:function(e,t){return n(e,t,"PATCH")},apiDelete:function(e,t){return n(e,t,"DELETE")},handle:n,loading:function(){t=e('<div class="modal-backdrop fade in" style="z-index: 9999;"></div>                <div style="position: fixed;top: 50%; left: 50%; background: #FFF; border: 1px #000 solid;z-index: 10000; padding: 5px;">                    <img src="/images/loading.gif" alt="loading">加载中...                </div>                '),document.activeElement.blur(),e("body").append(t)},removeLoading:function(){t.remove()}}});